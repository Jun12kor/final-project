<!-- your_app/templates/your_app/post_list.html -->

{% extends 'base.html' %}

{% load static %}
{% block content %}
    <link href="{% static 'css/post_list_style.css' %}" rel="stylesheet"/>
    <div class="board_wrap">
        <div class="board_title">
            <strong>게시판</strong>
            <p>이곳은 커뮤니티입니다.</p>
        </div>
        <div class="board_list_wrap">
            <div class="board_list">
                <div class="top">
                    <div class="num">번호</div>
                    <div class="title">제목</div>
                    <div class="writer">글쓴이</div>
                    <div class="date">작성일</div>
                    <div class="count">조회</div>
                </div>
                {% for post in posts %}
                <div>
                    <div class="num">{{ post.id }}</div>
                    <div class="title">
                        <li><a href="{% url 'post_detail' post.pk %}">{{ post.title }}</a></li>
                    </div>
                    <div class="writer">{{ post.author.username }}</div>
                    <div class="date">
                        {{ post.created_at|date:"Y.m.d H:i" }}
                    </div>
                    <div class="count">33</div>
                </div>
                {% endfor %}
            </div>
            <div class="board_page">
                <a href="#" class="bt first"><<</a>
                <a href="#" class="bt prev"><</a>
                <a href="#" class="num on">1</a>
                <a href="#" class="num">2</a>
                <a href="#" class="num">3</a>
                <a href="#" class="num">4</a>
                <a href="#" class="num">5</a>
                <a href="#" class="bt next">></a>
                <a href="#" class="bt last">>></a>
            </div>
            {% if not user.is_authenticated %}
                <div class="bt_wrap">
                    <a href="#" id="post-create">글 쓰기</a>
                </div>
            {% else %}
                <div class="bt_wrap">
                    <a href="{% url 'post_create' %}">글 쓰기</a>
                </div>
            {% endif %}
        </div>
    </div>

    <script>
        // 로그인 필요 팝업 표시 함수
        function displayLoginPopup() {
            alert('로그인이 필요합니다.');
            // 또는 모달 창, 다른 커스텀 팝업 등으로 변경 가능
            // 팝업 창에 로그인 링크를 제공하여 사용자가 로그인 페이지로 이동할 수 있도록 할 수 있습니다.
        }

        // 이벤트 리스너를 사용하여 클릭 시 로그인 팝업 표시 및 기본 이벤트 동작 막기
        document.addEventListener('DOMContentLoaded', function() {
            var newPostLink = document.getElementById("post-create");

            newPostLink.addEventListener('click', function(event) {
                event.preventDefault();
                displayLoginPopup();
            });
        });
    </script>
{% endblock %}